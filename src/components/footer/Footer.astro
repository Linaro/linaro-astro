---
import { getEntry } from "astro:content";
import CloudinaryImg from "../cloudinary/CloudinaryImg.astro";
import SocialIcons from "../common/SocialIcons.astro";
import { Icon } from "astro-icon/components";
const footer = await getEntry("data", "footer");

const { data: nav } = await getEntry("data", "nav");
const {
  data: { company_links },
} = await getEntry("data", "footer");

const path = Astro.url.pathname;
---

<footer
  class="container mx-auto px-8 text-grey text-sm flex flex-col items-center mt-auto z-50"
>
  <div class="fade-border"></div>
  <div
    class="pt-12 flex gap-16 xl:gap-24 justify-center lg:justify-between w-full"
  >
    <div class="max-w-[30ch]">
      <a href="/" class="text-lg"
        ><CloudinaryImg
          src={"linaro-website/graphics/logo-white"}
          alt="Linaro Logo"
          class="h-auto w-[125px] xl:w-[150px] mb-8"
          width={150}
          height={52}
        /></a
      >
      <p>Linaro Limited</p>
      <p>Harston Mill / Harston</p>
      <p class="mb-4">Cambridge / CB22 7GG</p>
      <SocialIcons size={15} color="grey" styles="gap-6 justify-start" />
    </div>
    <ul class="gap-8 hidden lg:flex mb-8">
      {
        nav.map((item: any) =>
          item.children ? (
            <li class="max-w-[15ch]">
              <p class="text-white text-[1rem] mb-4">{item.label}</p>
              <ul>
                {item.children.map((item: any) => (
                  <li class="mb-2">
                    <a href={item.url} class="hover:text-linaro-yellow">
                      {item.label}
                    </a>
                  </li>
                ))}
              </ul>
            </li>
          ) : (
            <li>
              <a
                href={item.url}
                class="text-white text-[1rem] mb-4 hover:text-linaro-yellow"
              >
                {item.label}
              </a>
            </li>
          )
        )
      }
    </ul>
  </div>
  <a
    class="text-lg text-white my-8 flex lg:hidden items-center gap-2"
    href={`${path}#top-nav`}>Back to top<Icon name="mdi:arrow-up-right" /></a
  >
  <div class="fade-border"></div>
  <div
    class="flex flex-col md:flex-row mb-12 md:mb-24 gap-4 xl:gap-24 items-center justify-start md:justify-between w-full mt-8"
  >
    <ul class="flex gap-4">
      {
        company_links.map(({ url, label }: { url: string; label: string }) => (
          <li>
            <a href={url} class="hover:text-linaro-yellow">
              {label}
            </a>
          </li>
        ))
      }
    </ul>
    <span>Copyright Â© {new Date().getFullYear()} Linaro Limited</span>
  </div>
</footer>
